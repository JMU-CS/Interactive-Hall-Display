<!DOCTYPE html>
<html>

<head>
    <title>JMU Computer Science</title>
    <meta name="description" content="Make online games and playful applications with this library">
    <meta property="og:title" content="JMU Computer Science" />
    <meta property="og:image" content="http://p5play.molleindustria.org/og-image.jpg" />
    <meta property="og:description" content="Make online games and playful applications with this library" />

    <script src="lib/jquery.min.js" type="text/javascript"></script>
    <script src="lib/p5.js" type="text/javascript"></script>
    <script src="lib/p5.play.js" type="text/javascript"></script>
    <script src="lib/player.js" type="text/javascript"></script>
    <script src="lib/markdown.min.js" type="text/javascript"></script>

    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,600' rel='stylesheet' type='text/css'>
    <!--script src="games/sketch.js" type="text/javascript"></script-->

    <link rel="stylesheet" type="text/css" href="style.css">

</head>

<body>

    <div id="bgCanvas"></div>

    <div id="container">


        <div id="slides">
            <div id="theSlides">
                
            </div>
        </div>

        <h1 style="z-index: 200; margin-bottom: 0; left: 0.5em; bottom: 25px; position:absolute;">
            JMU CompSci
        </h1>

        <div style="z-index: 200; right: 1.5em; bottom: 25px; position:absolute;">
            Interact with this presentation @ (coming soon).
        </div>

    </div>


    <script>

        var fileName;
        var originalCode;

        //load a script
        $(document).ready(function () {

            var searchString = window.location.search.substring(1);
            var variableArray = searchString.split('&');
            fileName = getUrlValue("sketch");

            if (fileName == undefined)
                fileName = "splash-sketch";

            $.ajax({
                type: "GET",
                url: "games/" + fileName + ".js",
                dataType: "text",
                async: true,
                success: loadLibraries,
                error: loadLibrariesDefault
            });

            // Load the slides
            $('#theSlides').load('./slides.html', function () {

                var divs = $('#theSlides div.slide');
                var duration = 10000;

                function fade() {
                    var current = $('.current');
                    
                    var currentIndex = divs.index(current),
                        nextIndex = currentIndex + 1;
                    
                    if (currentIndex == -1) {
                        current = divs.eq(currentIndex);
                    }

                    if (nextIndex >= divs.length) {
                        nextIndex = 0;
                    }

                    var next = divs.eq(nextIndex);

                    next.stop().fadeIn(2000, function() {
                        $(this).addClass('current');
                    });

                    current.stop().fadeOut(2000, function() {
                        $(this).removeClass('current');
                        setTimeout(fade, duration);
                    });
                }

                fade();
            });

        });//doc ready

        function getUrlValue(varSearch) {
            var searchString = window.location.search.substring(1);
            var variableArray = searchString.split('&');

            for (var i = 0; i < variableArray.length; i++) {
                var keyValuePair = variableArray[i].split('=');
                console.log(keyValuePair);
                if (keyValuePair[0] == varSearch) {
                    return keyValuePair[1];
                }
            }
        }

        function loadLibrariesDefault() {
            alert("An error occurred.");
        }

        function loadLibraries(data) {
            originalCode = data;

            startMain();
            console.log("example loaded");

            $.ajax({
                type: "GET",
                url: "lib/p5.play.js",
                dataType: "text",
                async: true,
                success: playEditor
            });

        }

        function reset() {
            playEditor();
        }

        function run() {
            playEditor();
        }

    </script>

</body>

</html>